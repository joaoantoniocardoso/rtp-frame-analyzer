services:
  analyzer:
    build: .
    image: rtp-frame-analyzer
    network_mode: host
    cap_add:
      - NET_RAW
      - NET_ADMIN
    environment:
      - RTSP_URL=${RTSP_URL:?Set RTSP_URL in .env or environment}
      - CAPTURE_DURATION=${CAPTURE_DURATION:-60}
      - NETWORK_INTERFACE=${NETWORK_INTERFACE:-auto}
      - CAMERA_TELNET_PASSWORD=${CAMERA_TELNET_PASSWORD:-}
      - CAMERA_TELNET_USER=${CAMERA_TELNET_USER:-root}
      - CAMERA_MONITOR_INTERVAL=${CAMERA_MONITOR_INTERVAL:-2}
      - CAMERA_BASELINE_DURATION=${CAMERA_BASELINE_DURATION:-5}
    volumes:
      - ${OUTPUT_DIR:-./output}:/data
      - /sys:/sys:ro
